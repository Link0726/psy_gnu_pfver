<!-- comm.html : 의사소통 유형 검사 (0/1점, 결과페이지 연결 버전 - reset/선택지 버튼 제거, O=1/X=0 반영) -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>의사소통 유형 검사</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-gradient-to-b from-blue-50 via-purple-50 to-pink-50 min-h-screen p-6"
  >
    <div class="max-w-5xl mx-auto">
      <header class="mb-6">
        <h1 class="text-3xl font-bold text-center text-purple-700">
          🗣️ 의사소통 유형 검사
        </h1>
        <p class="text-sm text-gray-600 text-center mt-2">
          당신이 의사소통을 하는 유형은 어떤 유형일까요? 이 검사를 통해서 어떠한
          의사소통을 하고 있는지 알아볼 수 있습니다. 문항에는 옳고 그른 답이
          없으니, 한 문항도 빠트리지 말고 아래의 질문에 솔직하게 응답해주세요.
          <b>O는 1점, X는 0점</b>입니다.
        </p>
      </header>

      <form id="commForm" class="space-y-3">
        <div
          class="grid grid-cols-7 text-center font-semibold bg-purple-100 rounded-lg py-2"
        >
          <div class="col-span-5 text-left pl-3">문항</div>
          <div>O</div>
          <div>X</div>
        </div>

        <div id="questionList" class="space-y-2"></div>

        <div class="mt-6 flex items-center justify-center">
          <button
            type="submit"
            class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 shadow"
          >
            결과 보기
          </button>
        </div>
      </form>
    </div>

    <script>
      const questions = [
        "나는 상대방이 불편하게 보이면 비위를 맞추려고 한다.",
        "나는 일이 잘못되었을 때 자주 상대방의 탓으로 돌린다.",
        "나는 무슨 일이든지 조목조목 따지는 편이다.",
        "나는 생각이 자주 바뀌고 동시에 여러 가지 행동을 하는 편이다.",
        "나는 타인의 평가에 구애 받지 않고 내 의견을 말한다.",
        "나는 관계나 일이 잘못되었을 때 자주 내 탓으로 돌린다.",
        "나는 다른 사람의 의견을 무시하고 내 의견을 주장하는 편이다.",
        "나는 이성적이고 차분하며 냉정하게 생각한다",
        "나는 다른 사람들로부터 정신이 없거나 산만하다는 소리를 듣는다.",
        "나는 부정적인 감정도 솔직하게 표현한다.",
        "나는 지나치게 남을 의식해서 나의 생각이나 감정을 표현하는 것을 두려워한다.",
        "나는 내 의견이 받아들여지지 않으면 화가 나서 언성을 높인다.",
        "나는 나의 견해를 분명하게 표현하기 위해 객관적인 자료를 자주 인용한다.",
        "나는 상황에 적절하지 못한 말이나 행동을 자주 하고 딴전을 피우는 편이다.",
        "나는 다른 사람이 내게 부탁을 할 때 내가 원하지 않으면 거절한다.",
        "나는 사람들의 얼굴 표정, 감정, 말투에 신경을 많이 쓴다.",
        "나는 타인의 결점이나 잘못을 잘 찾아내어 비판한다.",
        "나는 실수하지 않으려고 애를 쓰는 편이다.",
        "나는 곤란하거나 난처할 때는 농담이나 유머로 그 상황을 바꾸려하는 편이다.",
        "나는 나 자신에 대해 편안하게 느낀다.",
        "나는 타인을 배려하고 잘 돌보아주는 편이다.",
        "나는 명령적이고 지시적인 말투를 자주 사용하기 때문에 상대가 공격받았다는 느낌을 받을 때가 있다.",
        "나는 불편한 상황을 그대로 넘기지 못하고 시시비비를 따지는 편이다.",
        "나는 불편한 상황에서는 안절부절못하거나 가만히 있지를 못한다.",
        "나는 모험하는 것을 두려워하지 않는다.",
        "나는 다른 사람들이 나를 싫어할까 두려워서 위축되거나 불안을 느낄 때가 많다.",
        "나는 사소한 일에도 잘 흥분하거나 화를 낸다.",
        "나는 현명하고 침착하지만 냉정하다는 말을 자주 듣는다.",
        "나는 한 주제에 집중하기보다는 화제를 자주 바꾼다.",
        "나는 다양한 경험에 개방적이다.",
        "나는 타인의 요청을 거절하지 못하는 편이다.",
        "나는 자주 근육이 긴장되고 목이 뻣뻣하며 혈압이 오르는 것을 느끼곤 한다.",
        "나는 나의 감정을 표현하는 것이 힘들고, 혼자인 느낌이 들 때가 많다.",
        "나는 분위기가 침체되거나 지루해지면 분위기를 바꾸려 한다.",
        "나는 나만의 독특한 개성을 존중한다.",
        "나는 나 자신이 가치가 없는 것 같아 우울하게 느낄 때가 많다.",
        "나는 타인으로부터 비판적이거나 융통성이 없다는 말을 듣기도 한다.",
        "나는 목소리가 단조롭고 무표정하며 경직된 자세를 취하는 편이다.",
        "나는 불안하면 호흡이 고르지 못하고 머리가 어지러운 경험을 하기도 한다.",
        "나는 누가 나의 의견에 반대해도 감정이 상하지 않는다.",
      ];

      // ===== 그룹 매핑 =====
      const groups = {
        pl: { name: "회유형", items: [1, 6, 11, 16, 21, 26, 31, 36] },
        bl: { name: "비난형", items: [2, 7, 12, 17, 22, 27, 32, 37] },
        sr: { name: "초이성형", items: [3, 8, 13, 18, 23, 28, 33, 38] },
        ir: { name: "산만형", items: [4, 9, 14, 19, 24, 29, 34, 39] },
        cg: { name: "일치형", items: [5, 10, 15, 20, 25, 30, 35, 40] },
      };

      // 문항 렌더링 (O=1, X=0 값 주의!)
      const list = document.getElementById("questionList");
      questions.forEach((text, idx) => {
        const n = idx + 1;
        const row = document.createElement("div");
        row.className =
          "grid grid-cols-7 items-center bg-white rounded-lg shadow p-3";

        const textCell = document.createElement("div");
        textCell.className = "col-span-5 text-sm text-gray-800";
        textCell.textContent = `${n}. ${text}`;
        row.appendChild(textCell);

        // O = 1점
        const cellO = document.createElement("label");
        cellO.className = "flex items-center justify-center";
        cellO.innerHTML = `<input type="radio" name="q${n}" value="1" class="w-4 h-4" required/>`;
        row.appendChild(cellO);

        // X = 0점
        const cellX = document.createElement("label");
        cellX.className = "flex items-center justify-center";
        cellX.innerHTML = `<input type="radio" name="q${n}" value="0" class="w-4 h-4" required/>`;
        row.appendChild(cellX);

        list.appendChild(row);
      });

      // 제출 → 결과 페이지 연결
      document.getElementById("commForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const getVal = (n) =>
          Number(document.querySelector(`input[name="q${n}"]:checked`).value);

        const totals = {};
        for (const [key, info] of Object.entries(groups)) {
          totals[key] = info.items.reduce((sum, n) => sum + getVal(n), 0);
        }

        const params = new URLSearchParams(totals).toString(); // pl, bl, sr, ir, cg
        location.href = `comm_result.html?${params}`;
      });
    </script>
  </body>
</html>
